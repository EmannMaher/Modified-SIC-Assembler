COPY START 1000 
COMP #0 
NORM 
WRREC LDX #0 
TIX MAXLEN 
FIRST STL RETADR 
CLOOP JSUB RDREC 
FIX 
LDA LENGTH 
RETADR RESW 1 
JEQ ENDFIL 
JSUB WRREC 
J CLOOP 
FLOAT 
ENDFIL LDA EOF 
STA BUFFER 
LDA #3 
STA LENGTH 
JSUB WRREC 
LDL RETADR 
HIO 
LENGTH RESW 1 
INPUT BYTE X'F1' 
MAXLEN WORD 4096 
RDREC LDX #0 
LDA #0 
RLOOP TD INPUT 
JEQ RLOOP 
RD INPUT 
COMP #0 
EOF BYTE C'EOF' 
JEQ EXIT 
STCH BUFFER,X 
BUFFER RESB 4096 
JLT RLOOP 
SIO 
EXIT STX LENGTH 
RSUB 
OUTPUT BYTE X'05' 
RSUB 
WLOOP TD OUTPUT 
JEQ WLOOP 
LDCH BUFFER,X 
WD OUTPUT 
RSUB 
FLOAT 
JLT WLOOP 
LDA #3 
END FIRST 
